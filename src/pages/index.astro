---
import Base from '../layouts/Base.astro';
import site from '../content/site.json';

const { brand, navigation, hero, manifest, capabilities, reviews, contact, footer, labels } = site;
---
<Base>
  <main class="min-h-screen">
    <header class="px-6 py-8 md:px-12">
      <div class="mx-auto flex max-w-6xl items-center justify-between gap-6">
        <div class="text-lg font-semibold tracking-[0.2em] text-gold">{brand.name}</div>
        <nav class="hidden gap-6 text-sm uppercase tracking-[0.2em] text-fog md:flex">
          {navigation.map((item) => (
            <a class="transition hover:text-gold" href={item.href}>{item.label}</a>
          ))}
        </nav>
      </div>
    </header>

    <section id="inicio" class="px-6 pb-16 pt-8 md:px-12 md:pb-24">
      <div class="mx-auto grid max-w-6xl items-center gap-12 md:grid-cols-[1.1fr_0.9fr]">
        <div class="space-y-6">
          <p class="text-xs uppercase tracking-[0.4em] text-fog">{hero.eyebrow}</p>
          <h1 class="text-4xl font-semibold leading-tight text-sand md:text-5xl">{hero.headline}</h1>
          <p class="max-w-xl text-base leading-relaxed text-fog md:text-lg">{hero.subhead}</p>
          <div class="flex flex-wrap gap-4">
            <a
              class="rounded-full bg-gold px-6 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-ink transition hover:shadow-glow"
              href={hero.cta.href}
              data-track="cta_primary"
            >
              {hero.cta.label}
            </a>
            <a
              class="rounded-full border border-fog/40 px-6 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-sand transition hover:border-gold hover:text-gold"
              href={hero.secondaryCta.href}
              data-track="cta_secondary"
            >
              {hero.secondaryCta.label}
            </a>
          </div>
        </div>
        <div class="relative">
          <div class="absolute inset-0 -z-10 rounded-[32px] bg-gradient-to-tr from-gold/20 via-transparent to-transparent blur-3xl"></div>
          <picture>
            <source srcset={hero.image.avif} type="image/avif" />
            <source srcset={hero.image.webp} type="image/webp" />
            <img
              class="aspect-[4/5] w-full rounded-[32px] border border-fog/20 object-cover"
              src={hero.image.fallback}
              alt={hero.image.alt}
              loading="eager"
              fetchpriority="high"
              decoding="async"
            />
          </picture>
        </div>
      </div>
    </section>

    <section id="manifiesto" class="border-t border-fog/15 px-6 py-16 md:px-12">
      <div class="mx-auto grid max-w-6xl gap-10 md:grid-cols-[0.7fr_1.3fr]">
        <div>
          <h2 class="text-2xl font-semibold text-sand md:text-3xl">{manifest.title}</h2>
        </div>
        <div class="space-y-4 text-base leading-relaxed text-fog">
          {manifest.body.map((paragraph) => (
            <p>{paragraph}</p>
          ))}
        </div>
      </div>
    </section>

    <section id="capacidades" class="px-6 py-16 md:px-12">
      <div class="mx-auto max-w-6xl">
        <div class="mb-10 flex items-end justify-between gap-6">
          <h2 class="text-2xl font-semibold text-sand md:text-3xl">{labels.capabilitiesTitle}</h2>
          <span class="text-xs uppercase tracking-[0.3em] text-fog">{brand.location}</span>
        </div>
        <div class="grid gap-6 md:grid-cols-3">
          {capabilities.map((item) => (
            <article class="rounded-3xl border border-fog/20 bg-ink/60 p-6">
              <h3 class="mb-3 text-lg font-semibold text-sand">{item.title}</h3>
              <p class="text-sm leading-relaxed text-fog">{item.description}</p>
            </article>
          ))}
        </div>
      </div>
    </section>

    <section id="voces" class="border-t border-fog/15 px-6 py-16 md:px-12">
      <div class="mx-auto max-w-6xl">
        <div class="mb-8 flex items-center justify-between">
          <h2 class="text-2xl font-semibold text-sand md:text-3xl">{labels.voicesTitle}</h2>
          <span class="text-xs uppercase tracking-[0.3em] text-fog">{labels.voicesEyebrow}</span>
        </div>
        <div class="flex snap-x snap-mandatory gap-6 overflow-x-auto pb-4 md:grid md:grid-cols-3 md:overflow-visible">
          {reviews.map((review) => (
            <article class="min-w-[260px] snap-start rounded-3xl border border-fog/20 bg-ink/60 p-6 md:min-w-0">
              <p class="mb-4 text-sm leading-relaxed text-sand">"{review.quote}"</p>
              <p class="text-xs uppercase tracking-[0.2em] text-gold">{review.name}</p>
              <p class="text-xs text-fog">{review.role}</p>
            </article>
          ))}
        </div>
      </div>
    </section>

    <section id="contacto" class="px-6 py-20 md:px-12">
      <div class="mx-auto max-w-6xl rounded-[40px] border border-gold/30 bg-gradient-to-br from-ink via-ink to-gold/10 p-10 md:p-16">
        <div class="grid gap-6 md:grid-cols-[1.2fr_0.8fr] md:items-center">
          <div class="space-y-4">
            <h2 class="text-3xl font-semibold text-sand md:text-4xl">{contact.title}</h2>
            <p class="text-base text-fog">{contact.note}</p>
          </div>
          <div class="flex flex-col items-start gap-4">
            <a
              class="rounded-full bg-gold px-6 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-ink transition hover:shadow-glow"
              href={contact.button.href}
              data-track="cta_contact"
            >
              {contact.button.label}
            </a>
            <span class="text-xs uppercase tracking-[0.2em] text-fog">{contact.email}</span>
          </div>
        </div>
      </div>
    </section>

    <footer class="border-t border-fog/15 px-6 py-10 md:px-12">
      <div class="mx-auto flex max-w-6xl flex-col gap-6 text-xs uppercase tracking-[0.2em] text-fog md:flex-row md:items-center md:justify-between">
        <span>{footer.note}</span>
        <div class="flex gap-6">
          {footer.links.map((link) => (
            <a class="transition hover:text-gold" href={link.href}>{link.label}</a>
          ))}
        </div>
      </div>
    </footer>
  </main>

  <script type="module">
    import { trackEvent } from '../lib/analytics';

    const tracked = document.querySelectorAll('[data-track]');
    tracked.forEach((element) => {
      element.addEventListener('click', () => {
        const name = element.getAttribute('data-track');
        if (name) trackEvent(name);
      });
    });
  </script>
</Base>
